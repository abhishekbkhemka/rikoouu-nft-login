{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import FormErrors from\"../FormErrors\";import Validate from\"../utility/FormValidation\";import{Auth}from'aws-amplify';var ChangePassword=/*#__PURE__*/function(_Component){_inherits(ChangePassword,_Component);var _super=_createSuper(ChangePassword);function ChangePassword(){var _this;_classCallCheck(this,ChangePassword);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={oldpassword:\"\",newpassword:\"\",confirmpassword:\"\",errors:{cognito:null,blankfield:false,passwordmatch:false}};_this.clearErrorState=function(){_this.setState({errors:{cognito:null,blankfield:false,passwordmatch:false}});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var error,user,err;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();// Form validation\n_this.clearErrorState();error=Validate(event,_this.state);if(error){_this.setState({errors:_objectSpread(_objectSpread({},_this.state.errors),error)});}// AWS Cognito integration here\n_context.prev=4;_context.next=7;return Auth.currentAuthenticatedUser();case 7:user=_context.sent;console.log(user);_context.next=11;return Auth.changePassword(user,_this.state.oldpassword,_this.state.newpassword);case 11:_this.props.history.push(\"/changepasswordconfirmation\");_context.next=20;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);err=null;!_context.t0.message?err={\"message\":_context.t0}:err=_context.t0;_this.setState({errors:_objectSpread(_objectSpread({},_this.state.errors),{},{cognito:err})});console.log(err);case 20:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onInputChange=function(event){_this.setState({[event.target.id]:event.target.value});document.getElementById(event.target.id).classList.remove(\"is-danger\");};return _this;}_createClass(ChangePassword,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"section\",{className:\"section auth\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Change Password\"),/*#__PURE__*/React.createElement(FormErrors,{formerrors:this.state.errors}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"password\",id:\"oldpassword\",placeholder:\"Old password\",value:this.state.oldpassword,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"password\",id:\"newpassword\",placeholder:\"New password\",value:this.state.newpassword,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"password\",id:\"confirmpassword\",placeholder:\"Confirm password\",value:this.state.confirmpassword,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/forgotpassword\"},\"Forgot password?\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button is-success\"},\"Change password\"))))));}}]);return ChangePassword;}(Component);export default ChangePassword;","map":{"version":3,"sources":["/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/src/components/auth/ChangePassword.js"],"names":["React","Component","FormErrors","Validate","Auth","ChangePassword","state","oldpassword","newpassword","confirmpassword","errors","cognito","blankfield","passwordmatch","clearErrorState","setState","handleSubmit","event","preventDefault","error","currentAuthenticatedUser","user","console","log","changePassword","props","history","push","err","message","onInputChange","target","id","value","document","getElementById","classList","remove"],"mappings":"gqCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,OAASC,IAAT,KAAqB,aAArB,C,GAEMC,CAAAA,c,2VACJC,K,CAAQ,CACNC,WAAW,CAAE,EADP,CAENC,WAAW,CAAE,EAFP,CAGNC,eAAe,CAAE,EAHX,CAINC,MAAM,CAAE,CACNC,OAAO,CAAE,IADH,CAENC,UAAU,CAAE,KAFN,CAGNC,aAAa,CAAE,KAHT,CAJF,C,OAWRC,e,CAAkB,UAAM,CACtB,MAAKC,QAAL,CAAc,CACZL,MAAM,CAAE,CACNC,OAAO,CAAE,IADH,CAENC,UAAU,CAAE,KAFN,CAGNC,aAAa,CAAE,KAHT,CADI,CAAd,EAOD,C,OAEDG,Y,0FAAe,iBAAMC,KAAN,qIACbA,KAAK,CAACC,cAAN,GAEA;AACA,MAAKJ,eAAL,GACMK,KALO,CAKChB,QAAQ,CAACc,KAAD,CAAQ,MAAKX,KAAb,CALT,CAMb,GAAIa,KAAJ,CAAW,CACT,MAAKJ,QAAL,CAAc,CACZL,MAAM,gCAAO,MAAKJ,KAAL,CAAWI,MAAlB,EAA6BS,KAA7B,CADM,CAAd,EAGD,CAED;AAZa,sCAcQf,CAAAA,IAAI,CAACgB,wBAAL,EAdR,QAcLC,IAdK,eAeXC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAfW,uBAgBLjB,CAAAA,IAAI,CAACoB,cAAL,CACJH,IADI,CAEJ,MAAKf,KAAL,CAAWC,WAFP,CAGJ,MAAKD,KAAL,CAAWE,WAHP,CAhBK,SAqBX,MAAKiB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,6BAAxB,EArBW,iFAuBPC,GAvBO,CAuBD,IAvBC,CAwBX,CAAC,YAAMC,OAAP,CAAiBD,GAAG,CAAG,CAAE,qBAAF,CAAvB,CAA8CA,GAAG,YAAjD,CACA,MAAKb,QAAL,CAAc,CACZL,MAAM,gCAAO,MAAKJ,KAAL,CAAWI,MAAlB,MAA0BC,OAAO,CAAEiB,GAAnC,EADM,CAAd,EAGAN,OAAO,CAACC,GAAR,CAAYK,GAAZ,EA5BW,qE,qEAgCfE,a,CAAgB,SAAAb,KAAK,CAAI,CACvB,MAAKF,QAAL,CAAc,CACZ,CAACE,KAAK,CAACc,MAAN,CAAaC,EAAd,EAAmBf,KAAK,CAACc,MAAN,CAAaE,KADpB,CAAd,EAGAC,QAAQ,CAACC,cAAT,CAAwBlB,KAAK,CAACc,MAAN,CAAaC,EAArC,EAAyCI,SAAzC,CAAmDC,MAAnD,CAA0D,WAA1D,EACD,C,gEAED,iBAAS,CACP,mBACE,+BAAS,SAAS,CAAC,cAAnB,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,gDADF,cAEE,oBAAC,UAAD,EAAY,UAAU,CAAE,KAAK/B,KAAL,CAAWI,MAAnC,EAFF,cAIE,4BAAM,QAAQ,CAAE,KAAKM,YAArB,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,yBAAG,SAAS,CAAC,wBAAb,eACE,6BACE,SAAS,CAAC,OADZ,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,aAHL,CAIE,WAAW,CAAC,cAJd,CAKE,KAAK,CAAE,KAAKV,KAAL,CAAWC,WALpB,CAME,QAAQ,CAAE,KAAKuB,aANjB,EADF,cASE,4BAAM,SAAS,CAAC,uBAAhB,eACE,yBAAG,SAAS,CAAC,aAAb,EADF,CATF,CADF,CADF,cAgBE,2BAAK,SAAS,CAAC,OAAf,eACE,yBAAG,SAAS,CAAC,wBAAb,eACE,6BACE,SAAS,CAAC,OADZ,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,aAHL,CAIE,WAAW,CAAC,cAJd,CAKE,KAAK,CAAE,KAAKxB,KAAL,CAAWE,WALpB,CAME,QAAQ,CAAE,KAAKsB,aANjB,EADF,cASE,4BAAM,SAAS,CAAC,uBAAhB,eACE,yBAAG,SAAS,CAAC,aAAb,EADF,CATF,CADF,CAhBF,cA+BE,2BAAK,SAAS,CAAC,OAAf,eACE,yBAAG,SAAS,CAAC,wBAAb,eACE,6BACE,SAAS,CAAC,OADZ,CAEE,IAAI,CAAC,UAFP,CAGE,EAAE,CAAC,iBAHL,CAIE,WAAW,CAAC,kBAJd,CAKE,KAAK,CAAE,KAAKxB,KAAL,CAAWG,eALpB,CAME,QAAQ,CAAE,KAAKqB,aANjB,EADF,cASE,4BAAM,SAAS,CAAC,uBAAhB,eACE,yBAAG,SAAS,CAAC,aAAb,EADF,CATF,CADF,CA/BF,cA8CE,2BAAK,SAAS,CAAC,OAAf,eACE,yBAAG,SAAS,CAAC,SAAb,eACE,yBAAG,IAAI,CAAC,iBAAR,qBADF,CADF,CA9CF,cAmDE,2BAAK,SAAS,CAAC,OAAf,eACE,yBAAG,SAAS,CAAC,SAAb,eACE,8BAAQ,SAAS,CAAC,mBAAlB,oBADF,CADF,CAnDF,CAJF,CADF,CADF,CAoED,C,4BAlI0B7B,S,EAqI7B,cAAeI,CAAAA,cAAf","sourcesContent":["import React, { Component } from 'react';\nimport FormErrors from \"../FormErrors\";\nimport Validate from \"../utility/FormValidation\";\nimport { Auth } from 'aws-amplify';\n\nclass ChangePassword extends Component {\n  state = {\n    oldpassword: \"\",\n    newpassword: \"\",\n    confirmpassword: \"\",\n    errors: {\n      cognito: null,\n      blankfield: false,\n      passwordmatch: false\n    }\n  }\n\n  clearErrorState = () => {\n    this.setState({\n      errors: {\n        cognito: null,\n        blankfield: false,\n        passwordmatch: false\n      }\n    });\n  }\n\n  handleSubmit = async event => {\n    event.preventDefault();\n\n    // Form validation\n    this.clearErrorState();\n    const error = Validate(event, this.state);\n    if (error) {\n      this.setState({\n        errors: { ...this.state.errors, ...error }\n      });\n    }\n\n    // AWS Cognito integration here\n    try {\n      const user = await Auth.currentAuthenticatedUser();\n      console.log(user);\n      await Auth.changePassword(\n        user,\n        this.state.oldpassword,\n        this.state.newpassword\n      );\n      this.props.history.push(\"/changepasswordconfirmation\");\n    } catch (error) {\n      let err = null;\n      !error.message ? err = { \"message\": error } : err = error;\n      this.setState({\n        errors: { ...this.state.errors, cognito: err }\n      });\n      console.log(err);\n    }\n  }\n\n  onInputChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n    document.getElementById(event.target.id).classList.remove(\"is-danger\");\n  }\n\n  render() {\n    return (\n      <section className=\"section auth\">\n        <div className=\"container\">\n          <h1>Change Password</h1>\n          <FormErrors formerrors={this.state.errors} />\n\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"field\">\n              <p className=\"control has-icons-left\">\n                <input \n                  className=\"input\" \n                  type=\"password\"\n                  id=\"oldpassword\"\n                  placeholder=\"Old password\"\n                  value={this.state.oldpassword}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-lock\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control has-icons-left\">\n                <input\n                  className=\"input\"\n                  type=\"password\"\n                  id=\"newpassword\"\n                  placeholder=\"New password\"\n                  value={this.state.newpassword}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-lock\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control has-icons-left\">\n                <input\n                  className=\"input\"\n                  type=\"password\"\n                  id=\"confirmpassword\"\n                  placeholder=\"Confirm password\"\n                  value={this.state.confirmpassword}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-lock\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control\">\n                <a href=\"/forgotpassword\">Forgot password?</a>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control\">\n                <button className=\"button is-success\">\n                  Change password\n                </button>\n              </p>\n            </div>\n          </form>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default ChangePassword;"]},"metadata":{},"sourceType":"module"}