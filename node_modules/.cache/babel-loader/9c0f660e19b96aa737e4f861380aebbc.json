{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import FormErrors from\"../FormErrors\";import Validate from\"../utility/FormValidation\";import Auth from'@aws-amplify/auth';var LogIn=/*#__PURE__*/function(_React$Component){_inherits(LogIn,_React$Component);var _super=_createSuper(LogIn);function LogIn(props){var _this;_classCallCheck(this,LogIn);_this=_super.call(this,props);_this.state={username:\"\",password:\"\",errors:{cognito:null,blankfield:false}};_this.clearErrorState=function(){_this.setState({errors:{cognito:null,blankfield:false}});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var error,user,err;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();// Form validation\n_this.clearErrorState();error=Validate(event,_this.state);if(error){_this.setState({errors:_objectSpread(_objectSpread({},_this.state.errors),error)});}// AWS Cognito integration here\n_context.prev=4;_context.next=7;return Auth.signIn(_this.state.username,_this.state.password);case 7:user=_context.sent;console.log(user);_this.props.auth.setAuthStatus(true);_this.props.auth.setUser(user);_this.props.history.push(\"/\");//\n_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);err=null;!_context.t0.message?err={\"message\":_context.t0}:err=_context.t0;_this.setState({errors:_objectSpread(_objectSpread({},_this.state.errors),{},{cognito:err})});case 19:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onInputChange=function(event){_this.setState({[event.target.id]:event.target.value});document.getElementById(event.target.id).classList.remove(\"is-danger\");};Auth.currentAuthenticatedUser();return _this;}_createClass(LogIn,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"section\",{className:\"section auth\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Log in\"),/*#__PURE__*/React.createElement(FormErrors,{formerrors:this.state.errors}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"text\",id:\"username\",\"aria-describedby\":\"usernameHelp\",placeholder:\"Enter username or email\",value:this.state.username,onChange:this.onInputChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"password\",id:\"password\",placeholder:\"Password\",value:this.state.password,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/forgotpassword\"},\"Forgot password?\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button is-success\"},\"Login\"))))));}}]);return LogIn;}(React.Component);export default LogIn;","map":{"version":3,"sources":["/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/src/components/auth/LogIn.js"],"names":["React","FormErrors","Validate","Auth","LogIn","props","state","username","password","errors","cognito","blankfield","clearErrorState","setState","handleSubmit","event","preventDefault","error","signIn","user","console","log","auth","setAuthStatus","setUser","history","push","err","message","onInputChange","target","id","value","document","getElementById","classList","remove","currentAuthenticatedUser","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport FormErrors from \"../FormErrors\";\nimport Validate from \"../utility/FormValidation\";\nimport Auth from '@aws-amplify/auth';\n\n\n\nclass LogIn extends React.Component {\n\n\n\n    constructor(props){\n        super(props)\n        Auth.currentAuthenticatedUser()\n\n\n\n\n\n    }\n  state = {\n    username: \"\",\n    password: \"\",\n    errors: {\n      cognito: null,\n      blankfield: false\n    }\n  };\n\n  clearErrorState = () => {\n    this.setState({\n      errors: {\n        cognito: null,\n        blankfield: false\n      }\n    });\n  };\n\n  handleSubmit = async event => {\n\n      event.preventDefault();\n\n    // Form validation\n    this.clearErrorState();\n    const error = Validate(event, this.state);\n    if (error) {\n      this.setState({\n        errors: { ...this.state.errors, ...error }\n      });\n    }\n\n    // AWS Cognito integration here\n    try {\n\n        const user = await Auth.signIn(this.state.username, this.state.password);\n      console.log(user);\n      this.props.auth.setAuthStatus(true);\n      this.props.auth.setUser(user);\n      this.props.history.push(\"/\");\n        //\n      }catch(error) {\n      let err = null;\n      !error.message ? err = { \"message\": error } : err = error;\n      this.setState({\n        errors: {\n          ...this.state.errors,\n          cognito: err\n        }\n      });\n    }\n  };\n\n  onInputChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n    document.getElementById(event.target.id).classList.remove(\"is-danger\");\n  };\n\n\n\n\n\n    render() {\n    return (\n      <section className=\"section auth\">\n        <div className=\"container\">\n          <h1>Log in</h1>\n          <FormErrors formerrors={this.state.errors} />\n\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"field\">\n              <p className=\"control\">\n                <input \n                  className=\"input\" \n                  type=\"text\"\n                  id=\"username\"\n                  aria-describedby=\"usernameHelp\"\n                  placeholder=\"Enter username or email\"\n                  value={this.state.username}\n                  onChange={this.onInputChange}\n                />\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control has-icons-left\">\n                <input \n                  className=\"input\" \n                  type=\"password\"\n                  id=\"password\"\n                  placeholder=\"Password\"\n                  value={this.state.password}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-lock\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control\">\n                <a href=\"/forgotpassword\">Forgot password?</a>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control\">\n                <button className=\"button is-success\">\n                  Login\n                </button>\n              </p>\n            </div>\n          </form>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default LogIn;"]},"metadata":{},"sourceType":"module"}