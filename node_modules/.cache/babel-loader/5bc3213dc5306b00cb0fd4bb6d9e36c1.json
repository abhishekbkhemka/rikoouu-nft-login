{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import FormErrors from\"../FormErrors\";import Validate from\"../utility/FormValidation\";import{Auth}from\"aws-amplify\";var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(){var _this;_classCallCheck(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:\"\",email:\"\",password:\"\",confirmpassword:\"\",errors:{cognito:null,blankfield:false,passwordmatch:false}};_this.clearErrorState=function(){_this.setState({errors:{cognito:null,blankfield:false,passwordmatch:false}});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var error,_this$state,username,email,password,signUpResponse,err;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();// Form validation\n_this.clearErrorState();error=Validate(event,_this.state);if(error){_this.setState({errors:_objectSpread(_objectSpread({},_this.state.errors),error)});}// AWS Cognito integration here\n_this$state=_this.state,username=_this$state.username,email=_this$state.email,password=_this$state.password;_context.prev=5;_context.next=8;return Auth.signUp({username:username,password:password,attributes:{email:email}});case 8:signUpResponse=_context.sent;_this.props.history.push(\"/welcome\");console.log(signUpResponse);_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);err=null;!_context.t0.message?err={\"message\":_context.t0}:err=_context.t0;_this.setState({errors:_objectSpread(_objectSpread({},_this.state.errors),{},{cognito:err})});case 18:case\"end\":return _context.stop();}}},_callee,null,[[5,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onInputChange=function(event){_this.setState({[event.target.id]:event.target.value});document.getElementById(event.target.id).classList.remove(\"is-danger\");};return _this;}_createClass(Register,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"section\",{className:\"section auth\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Register\"),/*#__PURE__*/React.createElement(FormErrors,{formerrors:this.state.errors}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"text\",id:\"username\",\"aria-describedby\":\"userNameHelp\",placeholder:\"Enter username\",value:this.state.username,onChange:this.onInputChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left has-icons-right\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"email\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\",value:this.state.email,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-envelope\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"password\",id:\"password\",placeholder:\"Password\",value:this.state.password,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"password\",id:\"confirmpassword\",placeholder:\"Confirm password\",value:this.state.confirmpassword,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/forgotpassword\"},\"Forgot password?\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button is-success\"},\"Register\"))))));}}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/src/components/auth/Register.js"],"names":["React","Component","FormErrors","Validate","Auth","Register","state","username","email","password","confirmpassword","errors","cognito","blankfield","passwordmatch","clearErrorState","setState","handleSubmit","event","preventDefault","error","signUp","attributes","signUpResponse","props","history","push","console","log","err","message","onInputChange","target","id","value","document","getElementById","classList","remove"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport FormErrors from \"../FormErrors\";\nimport Validate from \"../utility/FormValidation\";\nimport { Auth } from \"aws-amplify\";\n\nclass Register extends Component {\n  state = {\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmpassword: \"\",\n    errors: {\n      cognito: null,\n      blankfield: false,\n      passwordmatch: false\n    }\n  }\n\n  clearErrorState = () => {\n    this.setState({\n      errors: {\n        cognito: null,\n        blankfield: false,\n        passwordmatch: false\n      }\n    });\n  }\n\n  handleSubmit = async event => {\n    event.preventDefault();\n\n    // Form validation\n    this.clearErrorState();\n    const error = Validate(event, this.state);\n    if (error) {\n      this.setState({\n        errors: { ...this.state.errors, ...error }\n      });\n    }\n\n    // AWS Cognito integration here\n    const { username, email, password } = this.state;\n    try {\n      const signUpResponse = await Auth.signUp({\n        username,\n        password,\n        attributes: {\n          email: email\n        }\n      });\n      this.props.history.push(\"/welcome\");\n      console.log(signUpResponse);\n    } catch (error) {\n      let err = null;\n      !error.message ? err = { \"message\": error } : err = error;\n      this.setState({\n        errors: {\n          ...this.state.errors,\n          cognito: err\n        }\n      });\n    }\n  }\n\n  onInputChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n    document.getElementById(event.target.id).classList.remove(\"is-danger\");\n  }\n\n  render() {\n    return (\n      <section className=\"section auth\">\n        <div className=\"container\">\n          <h1>Register</h1>\n          <FormErrors formerrors={this.state.errors} />\n\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"field\">\n              <p className=\"control\">\n                <input \n                  className=\"input\" \n                  type=\"text\"\n                  id=\"username\"\n                  aria-describedby=\"userNameHelp\"\n                  placeholder=\"Enter username\"\n                  value={this.state.username}\n                  onChange={this.onInputChange}\n                />\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control has-icons-left has-icons-right\">\n                <input \n                  className=\"input\" \n                  type=\"email\"\n                  id=\"email\"\n                  aria-describedby=\"emailHelp\"\n                  placeholder=\"Enter email\"\n                  value={this.state.email}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-envelope\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control has-icons-left\">\n                <input \n                  className=\"input\" \n                  type=\"password\"\n                  id=\"password\"\n                  placeholder=\"Password\"\n                  value={this.state.password}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-lock\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control has-icons-left\">\n                <input \n                  className=\"input\" \n                  type=\"password\"\n                  id=\"confirmpassword\"\n                  placeholder=\"Confirm password\"\n                  value={this.state.confirmpassword}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-lock\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control\">\n                <a href=\"/forgotpassword\">Forgot password?</a>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control\">\n                <button className=\"button is-success\">\n                  Register\n                </button>\n              </p>\n            </div>\n          </form>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}