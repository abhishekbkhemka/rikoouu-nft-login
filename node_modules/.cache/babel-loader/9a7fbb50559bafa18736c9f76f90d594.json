{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import FormErrors from\"../FormErrors\";import Validate from\"../utility/FormValidation\";import{Auth}from'aws-amplify';var ForgotPasswordVerification=/*#__PURE__*/function(_Component){_inherits(ForgotPasswordVerification,_Component);var _super=_createSuper(ForgotPasswordVerification);function ForgotPasswordVerification(){var _this;_classCallCheck(this,ForgotPasswordVerification);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={verificationcode:\"\",email:\"\",newpassword:\"\",errors:{cognito:null,blankfield:false}};_this.clearErrorState=function(){_this.setState({errors:{cognito:null,blankfield:false}});};_this.passwordVerificationHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();// Form validation\n_this.clearErrorState();error=Validate(event,_this.state);if(error){_this.setState({errors:_objectSpread(_objectSpread({},_this.state.errors),error)});}// AWS Cognito integration here\n_context.prev=4;_context.next=7;return Auth.forgotPasswordSubmit(_this.state.email,_this.state.verificationcode,_this.state.newpassword);case 7:_this.props.history.push(\"/changepasswordconfirmation\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](4);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[4,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onInputChange=function(event){_this.setState({[event.target.id]:event.target.value});document.getElementById(event.target.id).classList.remove(\"is-danger\");};return _this;}_createClass(ForgotPasswordVerification,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"section\",{className:\"section auth\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Set new password\"),/*#__PURE__*/React.createElement(\"p\",null,\"Please enter the verification code sent to your email address below, your email address and a new password.\"),/*#__PURE__*/React.createElement(FormErrors,{formerrors:this.state.errors}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.passwordVerificationHandler},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"input\",id:\"verificationcode\",\"aria-describedby\":\"verificationCodeHelp\",placeholder:\"Enter verification code\",value:this.state.verificationcode,onChange:this.onInputChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"email\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\",value:this.state.email,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-envelope\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"input\",id:\"newpassword\",placeholder:\"New password\",value:this.state.newpassword,onChange:this.onInputChange}),/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button is-success\"},\"Submit\"))))));}}]);return ForgotPasswordVerification;}(Component);export default ForgotPasswordVerification;","map":{"version":3,"sources":["/Users/abhishekbkhemka/rikoouu/rikoouu-login-demo-nft/src/components/auth/ForgotPasswordVerification.js"],"names":["React","Component","FormErrors","Validate","Auth","ForgotPasswordVerification","state","verificationcode","email","newpassword","errors","cognito","blankfield","clearErrorState","setState","passwordVerificationHandler","event","preventDefault","error","forgotPasswordSubmit","props","history","push","console","log","onInputChange","target","id","value","document","getElementById","classList","remove"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport FormErrors from \"../FormErrors\";\nimport Validate from \"../utility/FormValidation\";\nimport { Auth } from 'aws-amplify';\n\nclass ForgotPasswordVerification extends Component {\n  state = {\n    verificationcode: \"\",\n    email: \"\",\n    newpassword: \"\",\n    errors: {\n      cognito: null,\n      blankfield: false\n    }\n  };\n\n  clearErrorState = () => {\n    this.setState({\n      errors: {\n        cognito: null,\n        blankfield: false\n      }\n    });\n  };\n\n  passwordVerificationHandler = async event => {\n    event.preventDefault();\n\n    // Form validation\n    this.clearErrorState();\n    const error = Validate(event, this.state);\n    if (error) {\n      this.setState({\n        errors: { ...this.state.errors, ...error }\n      });\n    }\n\n    // AWS Cognito integration here\n    try {\n      await Auth.forgotPasswordSubmit(\n        this.state.email,\n        this.state.verificationcode,\n        this.state.newpassword\n      );\n      this.props.history.push(\"/changepasswordconfirmation\");\n    }catch(error) {\n      console.log(error);\n    }\n  };\n\n  onInputChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n    document.getElementById(event.target.id).classList.remove(\"is-danger\");\n  };\n\n  render() {\n    return (\n      <section className=\"section auth\">\n        <div className=\"container\">\n          <h1>Set new password</h1>\n          <p>\n            Please enter the verification code sent to your email address below,\n            your email address and a new password.\n          </p>\n          <FormErrors formerrors={this.state.errors} />\n\n          <form onSubmit={this.passwordVerificationHandler}>\n            <div className=\"field\">\n              <p className=\"control\">\n                <input\n                  type=\"text\"\n                  className=\"input\"\n                  id=\"verificationcode\"\n                  aria-describedby=\"verificationCodeHelp\"\n                  placeholder=\"Enter verification code\"\n                  value={this.state.verificationcode}\n                  onChange={this.onInputChange}\n                />\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control has-icons-left\">\n                <input \n                  className=\"input\" \n                  type=\"email\"\n                  id=\"email\"\n                  aria-describedby=\"emailHelp\"\n                  placeholder=\"Enter email\"\n                  value={this.state.email}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-envelope\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control has-icons-left\">\n                <input\n                  type=\"password\"\n                  className=\"input\"\n                  id=\"newpassword\"\n                  placeholder=\"New password\"\n                  value={this.state.newpassword}\n                  onChange={this.onInputChange}\n                />\n                <span className=\"icon is-small is-left\">\n                  <i className=\"fas fa-lock\"></i>\n                </span>\n              </p>\n            </div>\n            <div className=\"field\">\n              <p className=\"control\">\n                <button className=\"button is-success\">\n                  Submit\n                </button>\n              </p>\n            </div>\n          </form>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default ForgotPasswordVerification;"]},"metadata":{},"sourceType":"module"}